<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Jogo: A Cidade Firme de Jerusal√©m</title>
  <style>
    :root{--bg:#f4f6f8;--card:#ffffff;--accent:#2b6cb0;--human:#e76f51;--spirit:#2a9d8f}
    body{font-family:Inter, system-ui, -apple-system, Roboto, 'Segoe UI', Arial; background:var(--bg); margin:0; padding:18px; color:#1a202c}
    .container{max-width:980px;margin:0 auto;display:grid;grid-template-columns:360px 1fr;gap:20px}
    .card{background:var(--card);border-radius:10px;padding:14px;box-shadow:0 6px 18px rgba(15,23,42,0.06)}
    h1{font-size:18px;margin:0 0 6px}
    p.small{font-size:13px;color:#475569;margin-top:6px}

    /* torre */
    .tower-wrap{height:560px;border:2px dashed #cbd5e1;border-radius:8px;padding:10px;display:flex;align-items:end;justify-content:center;overflow:auto}
    .tower{width:140px;display:flex;flex-direction:column-reverse;align-items:center;gap:6px}
    .block{width:130px;height:34px;border-radius:6px;display:flex;align-items:center;justify-content:center;color:white;font-weight:600;cursor:pointer;user-select:none;box-shadow:0 2px 6px rgba(2,6,23,0.08)}
    .block.human{background:linear-gradient(90deg,var(--human),#d9534f)}
    .block.spirit{background:linear-gradient(90deg,var(--spirit),#21867a)}

    /* painel direito */
    .controls{display:flex;flex-direction:column;gap:12px}
    button{background:var(--accent);color:#fff;border:none;padding:10px 12px;border-radius:8px;font-weight:600;cursor:pointer}
    button.secondary{background:#4a5568}
    .row{display:flex;gap:8px}
    .info{font-size:14px}
    .situation{background:#eef2ff;padding:10px;border-radius:8px;border:1px solid #c7d2fe}
    .legend{display:flex;gap:8px;align-items:center}
    .dot{width:14px;height:14px;border-radius:4px}
    .dot.h{background:var(--human)}
    .dot.s{background:var(--spirit)}
    .log{height:160px;overflow:auto;background:#fff;border-radius:6px;padding:8px;border:1px solid #e2e8f0;font-size:13px}
    footer{font-size:13px;color:#475569;margin-top:10px}

    @media (max-width:880px){.container{grid-template-columns:1fr;}}
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <h1>üèôÔ∏è A Cidade Firme de Jerusal√©m</h1>
      <p class="small">Clique em blocos para remov√™-los. <strong>Blocos humanos</strong> representam alian√ßas/√≠dolos/auto-confian√ßa ‚Äî quando removidos, n√£o voltam. <strong>Blocos espirituais</strong> representam f√©/obedi√™ncia/arrependimento ‚Äî ao remov√™-los voc√™ pode optar por <em>reconstruir</em> (colocar no topo).</p>

      <div class="tower-wrap" id="towerWrap">
        <div class="tower" id="tower"></div>
      </div>

      <div style="margin-top:10px;display:flex;gap:8px;align-items:center;justify-content:space-between">
        <div class="legend">
          <div class="dot h"></div><div style="font-size:13px">Base humana</div>
          <div style="width:10px"></div>
          <div class="dot s"></div><div style="font-size:13px">Base espiritual</div>
        </div>
        <div style="font-size:13px;color:#475569">Blocos restantes: <strong id="count">0</strong></div>
      </div>

      <footer>
        <strong>Contexto b√≠blico:</strong> inspirado em Jeremias 52 ‚Äî a queda de Jerusal√©m quando o povo perdeu sua base espiritual. Objetivo: entender que apenas uma vida firmada em Deus resiste √†s tempestades.
      </footer>
    </div>

    <div class="card">
      <div class="controls">
        <div class="row">
          <button id="resetBtn">üîÅ Reiniciar torre</button>
          <button class="secondary" id="shuffleBtn">üîÄ Embaralhar tipos</button>
        </div>

        <div>
          <div style="display:flex;justify-content:space-between;align-items:center">
            <strong>Situa√ß√£o atual</strong>
            <button class="secondary" id="nextSit">Pr√≥xima situa√ß√£o</button>
          </div>
          <div class="situation" id="situation">Clique em "Pr√≥xima situa√ß√£o" para iniciar.</div>
        </div>

        <div>
          <strong>Registro (reflex√µes)</strong>
          <div class="log" id="log"></div>
        </div>

        <div style="display:flex;gap:8px;align-items:center">
          <button id="rebuildBtn">üîº Reconstruir bloco espiritual (colocar no topo)</button>
          <button class="secondary" id="explainBtn">üìñ Ler reflex√£o (Jeremias 52)</button>
        </div>

        <div class="info">Instru√ß√µes de uso: 1) Leia a situa√ß√£o; 2) Escolha um bloco da torre e clique para remov√™-lo; 3) Se remover um bloco espiritual, clique em "Reconstruir" para coloc√°-lo no topo; 4) Quando a torre ficar com menos de 3 blocos, considera-se que a cidade desabou ‚Äî discuta as causas e solu√ß√µes.</div>
      </div>
    </div>
  </div>

  <script>
    // Dados e configura√ß√£o
    const TOTAL_BLOCKS = 30;
    const towerEl = document.getElementById('tower');
    const countEl = document.getElementById('count');
    const logEl = document.getElementById('log');
    const situationEl = document.getElementById('situation');
    const rebuildBtn = document.getElementById('rebuildBtn');
    const resetBtn = document.getElementById('resetBtn');
    const shuffleBtn = document.getElementById('shuffleBtn');
    const nextSitBtn = document.getElementById('nextSit');
    const explainBtn = document.getElementById('explainBtn');

    let blocks = [];
    let selectedRemoved = null; // guarda √∫ltimo bloco removido

    const SITUATIONS = [
      {text: 'O povo faz alian√ßas pol√≠ticas buscando prote√ß√£o humana (ex.: confiar no Egito).', effect: 'human'},
      {text: 'O povo volta a adorar √≠dolos e esquece a Palavra.', effect: 'human'},
      {text: 'Alguns l√≠deres ouvem o profeta e chamam ao arrependimento.', effect: 'spirit'},
      {text: 'A popula√ß√£o confia em riquezas e n√£o em Deus.', effect: 'human'},
      {text: 'Um movimento de ora√ß√£o e leitura da B√≠blia surge entre as fam√≠lias.', effect: 'spirit'},
      {text: 'L√≠deres fazem alian√ßas com na√ß√µes vizinhas para vantagem pol√≠tica.', effect: 'human'},
      {text: 'Um remanescente decide permanecer fiel ao Senhor.', effect: 'spirit'},
      {text: 'Orgulho e autossufici√™ncia levam a decis√µes ruins.', effect: 'human'},
      {text: 'Chamado ao arrependimento p√∫blico √© aceito por alguns l√≠deres.', effect: 'spirit'}
    ];

    function log(msg){
      const el = document.createElement('div'); el.textContent = msg; logEl.prepend(el);
    }

    function makeBlocks(){
      blocks = [];
      // gerar tipos aleat√≥rios com propor√ß√£o aproximadamente 50/50
      for(let i=0;i<TOTAL_BLOCKS;i++){
        blocks.push({id: i, type: Math.random()>0.5? 'spirit':'human'});
      }
      renderTower();
    }

    function renderTower(){
      towerEl.innerHTML = '';
      blocks.forEach(b => {
        const d = document.createElement('div');
        d.className = 'block ' + (b.type==='human'?'human':'spirit');
        d.dataset.id = b.id;
        d.dataset.type = b.type;
        d.textContent = b.type==='human'? 'Humano':'Espiritual';
        d.title = 'Clique para remover';
        d.addEventListener('click', onBlockClick);
        towerEl.appendChild(d);
      });
      countEl.textContent = blocks.length;
    }

    function onBlockClick(e){
      const id = Number(e.currentTarget.dataset.id);
      const idx = blocks.findIndex(x=>x.id===id);
      if(idx===-1) return;
      const blk = blocks[idx];

      // remover fisicamente
      blocks.splice(idx,1);
      selectedRemoved = blk; // guarda para reconstru√ß√£o poss√≠vel
      renderTower();

      if(blk.type==='human'){
        log('Removido bloco HUMANO: ' + describeHuman());
      } else {
        log('Removido bloco ESPIRITUAL: ' + describeSpirit());
      }

      checkCollapse();
    }

    function describeHuman(){
      // frases para enriquecer
      const phrases = ['alian√ßas sem Deus','idolatria','confian√ßa em ex√©rcitos ou na√ß√µes','orgulho e autossufici√™ncia'];
      return phrases[Math.floor(Math.random()*phrases.length)];
    }
    function describeSpirit(){
      const phrases = ['ora√ß√£o','arrependimento','obedi√™ncia','confian√ßa em Deus'];
      return phrases[Math.floor(Math.random()*phrases.length)];
    }

    function checkCollapse(){
      if(blocks.length < 3){
        situationEl.textContent = 'üèöÔ∏è A torre caiu! A cidade desabou ‚Äî discutir causas (falta de base espiritual) e poss√≠veis reconstru√ß√µes.';
        log('A torre caiu. Realize uma reflex√£o: o que falhou? O que poderia ter sido diferente?');
      }
    }

    rebuildBtn.addEventListener('click', ()=>{
      if(!selectedRemoved){ alert('Nenhum bloco espiritual foi removido recentemente para reconstruir.'); return; }
      if(selectedRemoved.type !== 'spirit'){ alert('Somente blocos espirituais podem ser reconstru√≠dos.'); return; }
      // colocar no topo
      blocks.unshift({id: Date.now(), type: 'spirit'});
      renderTower();
      log('Reconstru√≠do bloco espiritual no topo: ' + describeSpirit());
      selectedRemoved = null;
    });

    resetBtn.addEventListener('click', ()=>{ makeBlocks(); log('Torre reiniciada.'); situationEl.textContent='Clique em "Pr√≥xima situa√ß√£o" para iniciar.'; });
    shuffleBtn.addEventListener('click', ()=>{ shuffleTypes(); renderTower(); log('Tipos embaralhados (mistura de bases).'); });

    nextSitBtn.addEventListener('click', ()=>{
      const s = SITUATIONS[Math.floor(Math.random()*SITUATIONS.length)];
      situationEl.textContent = s.text + (s.effect==='human'? ' (press√£o por bases humanas)':' (a√ß√£o de restaura√ß√£o espiritual)');
      log('Situa√ß√£o: ' + s.text);
    });

    explainBtn.addEventListener('click', ()=>{
      alert('Refer√™ncia: Jeremias 52 ‚Äî mostra a queda de Jerusal√©m quando o povo perdeu sua fidelidade. O jogo ilustra como uma base espiritual fraca leva ao desmoronamento, e como o arrependimento e a obedi√™ncia podem restaurar (reconstruir) a cidade.');
    });

    function shuffleTypes(){
      // trocar tipos de alguns blocos
      for(let i=0;i<Math.floor(TOTAL_BLOCKS*0.25);i++){
        const idx = Math.floor(Math.random()*blocks.length);
        blocks[idx].type = Math.random()>0.5?'spirit':'human';
      }
    }

    // iniciar
    makeBlocks();
    log('Bem-vindo! Explique aos alunos: clique em um bloco para remov√™-lo ‚Äî analise se foi a√ß√£o humana ou espiritual. Use "Reconstruir" para colocar novamente um bloco espiritual no topo.');
  </script>
</body>
</html>
